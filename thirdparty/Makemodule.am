noinst_LIBRARIES += \
	lib/libthirdparty.a

lib_libthirdparty_a_SOURCES = \
	thirdparty/fstapi.c \
	thirdparty/lz4.c \
	thirdparty/fstapi.h \
	thirdparty/lz4.h \
	thirdparty/fastlz.c \
	thirdparty/fastlz.h \
	thirdparty/cpustate.c \
	thirdparty/cpustate.h \
	thirdparty/sha1.c \
	thirdparty/sha1.h \
	thirdparty/svrand.h \
	thirdparty/svrand.c

if GNULIB_MEMMEM
lib_libthirdparty_a_SOURCES += thirdparty/memmem.c thirdparty/str-two-way.h
endif

if GNULIB_STRCASESTR
lib_libthirdparty_a_SOURCES += thirdparty/strcasestr.c thirdparty/str-two-way.h
endif

if GNULIB_GETLINE
lib_libthirdparty_a_SOURCES += thirdparty/getline.c thirdparty/getdelim.c
endif

if GNULIB_STRCHRNUL
lib_libthirdparty_a_SOURCES += thirdparty/strchrnul.c thirdparty/rawmemchr.c
endif

if GNULIB_STRNDUP
lib_libthirdparty_a_SOURCES += thirdparty/strndup.c
endif

EXTRA_PROGRAMS += bin/sha1test

bin_sha1test_SOURCES = thirdparty/sha1.c

bin_sha1test_CFLAGS = -DSHA1TEST
